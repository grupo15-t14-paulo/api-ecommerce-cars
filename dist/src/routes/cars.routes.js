"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.carRoutes = void 0;
const express_1 = require("express");
const cars_controllers_1 = require("../controllers/cars.controllers");
const ensureDataIsValid_middleware_1 = require("../middleware/ensureDataIsValid.middleware");
const cars_schema_1 = require("../schemas/cars.schema");
const verifyCarExists_middleware_1 = require("../middleware/cars/verifyCarExists.middleware");
const ensureIsSeller_middleware_1 = require("../middleware/ensureIsSeller.middleware");
const ensureTokenIsValidMiddleware_1 = require("../middleware/ensureTokenIsValidMiddleware");
const ensureIsOwnerCar_middleware_1 = require("../middleware/ensureIsOwnerCar.middleware");
exports.carRoutes = (0, express_1.Router)();
exports.carRoutes.get("", cars_controllers_1.listAllCarsController);
exports.carRoutes.get("/:id", cars_controllers_1.listCarsByUserIdController);
exports.carRoutes.get("/search/:carId", cars_controllers_1.listOneCarByIdController);
exports.carRoutes.use(ensureTokenIsValidMiddleware_1.ensureTokenIsValidMiddleware);
exports.carRoutes.post("", ensureIsSeller_middleware_1.ensureIsSeller, (0, ensureDataIsValid_middleware_1.ensureDataIsValid)(cars_schema_1.carCreateSchema), cars_controllers_1.createCarController);
exports.carRoutes.patch("/:id", verifyCarExists_middleware_1.verifyCarExists, ensureIsOwnerCar_middleware_1.ensureIsOwnerCar, (0, ensureDataIsValid_middleware_1.ensureDataIsValid)(cars_schema_1.carUpdateSchema), cars_controllers_1.updateCarController);
exports.carRoutes.delete("/:id", ensureIsOwnerCar_middleware_1.ensureIsOwnerCar, verifyCarExists_middleware_1.verifyCarExists, cars_controllers_1.deleteCarController);
