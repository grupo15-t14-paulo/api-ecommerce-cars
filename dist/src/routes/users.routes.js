"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.userRoutes = void 0;
const express_1 = require("express");
const ensureDataIsValid_middleware_1 = require("../middleware/ensureDataIsValid.middleware");
const users_schema_1 = require("../schemas/users.schema");
const users_controller_1 = require("../controllers/users.controller");
const ensureEmailExist_middleware_1 = require("../middleware/users/ensureEmailExist.middleware");
const ensureUserIdExist_middleware_1 = require("../middleware/users/ensureUserIdExist.middleware");
const ensureTokenIsValidMiddleware_1 = require("../middleware/ensureTokenIsValidMiddleware");
const address_schema_1 = require("../schemas/address.schema");
exports.userRoutes = (0, express_1.Router)();
exports.userRoutes.post("/resetPassword", users_controller_1.sendResetPassword);
exports.userRoutes.patch("/resetPassword/:token", users_controller_1.resetPassword);
exports.userRoutes.post("", (0, ensureDataIsValid_middleware_1.ensureDataIsValid)(users_schema_1.userSchema), ensureEmailExist_middleware_1.ensureEmailExistMiddleware, users_controller_1.createUserController);
exports.userRoutes.get("/:id", users_controller_1.listUserController);
exports.userRoutes.use(ensureTokenIsValidMiddleware_1.ensureTokenIsValidMiddleware);
exports.userRoutes.get("", users_controller_1.reatriveUserController);
exports.userRoutes.patch("", ensureUserIdExist_middleware_1.ensureUserIdExist, (0, ensureDataIsValid_middleware_1.ensureDataIsValid)(users_schema_1.updateUserWhitOutAdressSchema), users_controller_1.updateUserController);
exports.userRoutes.patch("/address", ensureUserIdExist_middleware_1.ensureUserIdExist, (0, ensureDataIsValid_middleware_1.ensureDataIsValid)(address_schema_1.updateUserAddressSchema), users_controller_1.updateUserController);
exports.userRoutes.delete("", ensureUserIdExist_middleware_1.ensureUserIdExist, users_controller_1.deleteUserController);
